{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/index.ts","webpack:///./res/style/index.css?b145","webpack:///./res/style/index.css","webpack:///./res/shaders/fragmentShader.glsl","webpack:///./res/shaders/vertexShader.glsl","webpack:///./src/gui.ts","webpack:///./src/render.ts","webpack:///./src/updateActions.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","getRandomNoiseTexture","Uint8Array","width","Math","random","dataTexture","THREE","DataTexture","RGBAFormat","UnsignedByteType","UVMapping","RepeatWrapping","LinearFilter","needsUpdate","getGeometry","totalLines","geometry","BufferGeometry","positions","Float32Array","setAttribute","BufferAttribute","getLines","material","lines","LineSegments","frustumCulled","onload","stats","Stats","showPanel","document","body","appendChild","dom","standard","input","multiplier","animate","multiplierIncrement","opacity","colorMethod","noiseStrength","antialias","camPosX","camPosY","camZoom","resetCamera","threeEnv","renderer","WebGLRenderer","setPixelRatio","devicePixelRatio","setSize","innerWidth","innerHeight","scene","Scene","camera","OrthographicCamera","position","setZ","lookAt","Vector3","ShaderMaterial","uniforms","total","noise","vertexShader","fragmentShader","blending","AdditiveBlending","depthTest","transparent","CustomBlending","blendEquation","AddEquation","blendSrc","SrcAlphaFactor","blendDst","OneFactor","add","getThreeEnv","renderContainer","createElement","id","domElement","getRenderContainer","renderController","RenderController","addEventListener","requestRender","Gui","initGUI","api","content","default","options","exported","locals","___CSS_LOADER_API_IMPORT___","gui","GUI","mathsFolder","addFolder","min","step","onChange","multiplierController","postRenderCallback","setValue","pow","open","animationFolder","max","colorFolder","renderFolder","cameraFolder","camPosXController","camPosYController","camZoomController","e","shiftKey","deltaY","buttons","circleDiameterPx","clientHeight","clientWidth","movementFactor","E","movementX","movementY","frameRequested","this","updateSources","Set","postRenderCallbacks","source","requestAnimationFrame","render","begin","update","prepareNextRender","end","has","updateRenderer","updateRendererSize","updateTotalLines","updateMultiplier","updateColorMethod","updateOpacity","updateCameraPosition","updateCameraZoom","updateNoiseStrength","clear","oldPostRenderCallbacks","forEach","callback","setX","setY","zoom","updateProjectionMatrix","height","aspectRatio","left","right","top","bottom","remove","newRenderer","firstChild","Error","replaceChild"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,1,2]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","// webpack\nimport \"../res/style/index.css\";\nimport fragmentShader from \"../res/shaders/fragmentShader.glsl\";\nimport vertexShader from \"../res/shaders/vertexShader.glsl\";\n// npm\nimport * as THREE from \"three\";\n// own\nimport * as Gui from \"./gui\";\nimport {RenderController} from \"./render\"\nimport {Input, RenderContainer, ThreeEnv} from \"./interfaces\";\nimport Stats = require(\"stats.js\");\n\n\nfunction getInitialInput(): Input {\n  const standard: Input = {\n    totalLines: 200,\n    multiplier: 2,\n    animate: false,\n    multiplierIncrement: 0.2,\n    opacity: 1,\n    colorMethod: 'lengthHue',\n    noiseStrength: 0.5,\n    antialias: false,\n    camPosX: 0,\n    camPosY: 0,\n    camZoom: 1,\n    resetCamera: () => {\n    }\n  };\n\n  const benchmark: Input = {\n    ...standard,\n    totalLines: 250000,\n    multiplier: 100000,\n    multiplierIncrement: 1,\n    opacity: 0.005,\n    colorMethod: 'faded',\n  };\n\n  const debug: Input = {\n    ...standard,\n    totalLines: 10,\n    multiplier: 2,\n    multiplierIncrement: 0.005,\n    colorMethod: 'faded',\n  };\n\n  const debugBlending: Input = {\n    ...standard,\n    totalLines: 10000,\n    opacity: 0.05,\n  };\n\n  const initialInputs = {\n    standard,\n    benchmark,\n    debug,\n    debugBlending\n  };\n\n  return initialInputs.standard;\n}\n\n\nfunction init() {\n  const stats = new Stats();\n  stats.showPanel(1);\n  document.body.appendChild(stats.dom);\n\n  const input = getInitialInput();\n\n  const threeEnv = getThreeEnv();\n\n  const renderContainer = getRenderContainer(threeEnv.renderer);\n\n  const renderController = new RenderController(stats, threeEnv, input, renderContainer);\n\n  window.addEventListener('resize', () => renderController.requestRender(\"resize\"));\n\n  Gui.initGUI(input, renderController, renderContainer);\n\n  renderController.requestRender(\"init\");\n}\n\nfunction getRenderContainer(renderer: THREE.WebGLRenderer): RenderContainer {\n  const renderContainer = document.createElement(\"div\");\n  renderContainer.id = \"render-container\";\n  document.body.appendChild(renderContainer);\n\n  renderContainer.appendChild(renderer.domElement);\n\n  return renderContainer;\n}\n\n// TODO: try other kinds of noises\nfunction getRandomNoiseTexture() {\n  const width = 1024;\n  const data = new Uint8Array(4 * width);\n  for (let i = 0; i < width * 4; i++) {\n    data[i] = Math.random() * 255 | 0;\n  }\n\n  const dataTexture = new THREE.DataTexture(data, width, 1, THREE.RGBAFormat, THREE.UnsignedByteType, THREE.UVMapping,\n    THREE.RepeatWrapping, THREE.RepeatWrapping, THREE.LinearFilter, THREE.LinearFilter);\n  dataTexture.needsUpdate = true;\n  return dataTexture;\n}\n\n/**\n * Static initialization of render environment\n */\nfunction getThreeEnv(): ThreeEnv {\n  const renderer = new THREE.WebGLRenderer({antialias: true});\n  renderer.setPixelRatio(window.devicePixelRatio);\n  renderer.setSize(window.innerWidth, window.innerHeight);\n\n  const scene = new THREE.Scene();\n\n  const camera = new THREE.OrthographicCamera(-1, 1, 1, -1);\n  camera.position.setZ(1);\n  camera.lookAt(new THREE.Vector3(0, 0, 0));\n\n  const material = new THREE.ShaderMaterial({\n    uniforms: {\n      multiplier: {value: 0},\n      total: {value: 0},\n      opacity: {value: 0},\n      colorMethod: {value: 0},\n      noise: {value: getRandomNoiseTexture()},\n      noiseStrength: {value: 0}\n    },\n    vertexShader: vertexShader,\n    fragmentShader: fragmentShader,\n    blending: THREE.AdditiveBlending,\n    depthTest: false,\n    transparent: true\n  });\n\n  material.blending = THREE.CustomBlending;\n  material.blendEquation = THREE.AddEquation;\n  material.blendSrc = THREE.SrcAlphaFactor;\n  material.blendDst = THREE.OneFactor;\n\n  const lines = getLines(getGeometry(0), material);\n\n  scene.add(lines);\n\n  return {\n    renderer,\n    scene,\n    camera,\n    material,\n    lines\n  };\n}\n\nexport function getGeometry(totalLines: number): THREE.BufferGeometry {\n  const geometry = new THREE.BufferGeometry();\n\n  // We use position attributes as parameters for the vertex shader\n  // because THREE.js seems to expect a position attribute in every BufferAttribute.\n  // Position attribute format:\n  //  x - index\n  //  y - isStart (of line) ? 0.0 : 1.0\n  //  z - unused\n  const vertices = totalLines * 2;\n  const positionsLength = vertices * 3;\n  const positions = new Float32Array(positionsLength);\n  for (let i = 0; i < totalLines; i++) {\n    positions[i * 6] = i; // x start\n    positions[i * 6 + 1] = 0.0; // y start\n    positions[i * 6 + 3] = i; // x end\n    positions[i * 6 + 4] = 1.0; // y end\n  }\n\n  geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));\n\n  return geometry;\n}\n\nexport function getLines(geometry: THREE.BufferGeometry, material: THREE.ShaderMaterial): THREE.LineSegments {\n  const lines = new THREE.LineSegments(geometry, material);\n  lines.frustumCulled = false;\n  return lines;\n}\n\nwindow.onload = init;","var api = require(\"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../node_modules/css-loader/dist/cjs.js!./index.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"canvas {\\r\\n    display: block;\\r\\n}\\r\\nbody {\\r\\n    margin: 0;\\r\\n}\\r\\n\\r\\n#render-container {\\r\\n  user-select: none;\\r\\n  cursor: default;\\r\\n}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","export default \"uniform float opacity;\\r\\nuniform sampler2D noise;\\r\\nuniform float noiseStrength;\\r\\n\\r\\nvarying vec3 vColor;\\r\\nvarying float vLinePosition;\\r\\n\\r\\nvoid main() {\\r\\n  gl_FragColor = vec4(vColor, opacity);\\r\\n\\r\\n  float noise = vec4(texture2D(noise, vec2(vLinePosition * 1024.0, 0.5))).r;\\r\\n\\r\\n  gl_FragColor.rgb += mix(-noiseStrength/255.0, noiseStrength/255.0, noise);\\r\\n}\";","export default \"uniform float multiplier;\\r\\nuniform float total;\\r\\nuniform int colorMethod;\\r\\n\\r\\nvarying vec3 vColor;\\r\\nvarying float vLinePosition;\\r\\n\\r\\n#define PI 3.1415926535897932384626433832795\\r\\n\\r\\nfloat distance(float index, float total, float multiplier);\\r\\nvec2 getCircleCord(float number, float total);\\r\\nvec3 hsv2rgb(vec3 c);\\r\\n\\r\\nvoid main() {\\r\\n  vec2 circleCord;\\r\\n\\r\\n  float index = position.x;\\r\\n  float isStartIndicator = position.y;\\r\\n  bool isStart = isStartIndicator == 0.0;\\r\\n  vLinePosition = isStartIndicator;\\r\\n  if (isStart) {\\r\\n    circleCord = getCircleCord(index, total);\\r\\n  } else {\\r\\n    circleCord = getCircleCord(index * multiplier, total);\\r\\n  }\\r\\n\\r\\n  gl_Position = projectionMatrix *\\r\\n                modelViewMatrix *\\r\\n  vec4(circleCord, 0.0, 1.0);\\r\\n\\r\\n  // colorMethod switch\\r\\n  if (colorMethod == 0) {\\r\\n    // solid\\r\\n    vColor = vec3(1.0);\\r\\n  } else if (colorMethod == 1) {\\r\\n    // faded\\r\\n    if (isStart) {\\r\\n      vColor = vec3(0.0);\\r\\n    } else {\\r\\n      vColor = vec3(1.0);\\r\\n    }\\r\\n  } else if (colorMethod == 2) {\\r\\n    // lengthOpacity\\r\\n    vColor = vec3(1.0 - distance(index, total, multiplier));\\r\\n  } else if (colorMethod == 3) {\\r\\n    // lengthHue\\r\\n    vColor = vec3(hsv2rgb(vec3(distance(index, total, multiplier), 1.0, 1.0)));\\r\\n  } else if (colorMethod == 4) {\\r\\n    // indexHue\\r\\n    vColor = vec3(hsv2rgb(vec3(index / total, 1.0, 1.0)));\\r\\n  } else if (colorMethod == 5) {\\r\\n    // fadedIndexHue\\r\\n    if (isStart) {\\r\\n      vColor = vec3(hsv2rgb(vec3(index / total, 1.0, 1.0)));\\r\\n    } else {\\r\\n      vColor = vec3(hsv2rgb(vec3(mod(index * multiplier, total) / total, 1.0, 1.0)));\\r\\n    }\\r\\n  } else {\\r\\n    // fallback error red\\r\\n    vColor = vec3(1.0, 0.0, 0.0);\\r\\n  }\\r\\n}\\r\\n\\r\\nfloat distance(float index, float total, float multiplier) {\\r\\n  float theta = 2.0 * PI * index * (multiplier - 1.0) / total;\\r\\n  return abs(sin(theta / 2.0));\\r\\n}\\r\\n\\r\\nvec2 getCircleCord(float index, float total) {\\r\\n  float normalized = 2.0 * PI * index / total;\\r\\n    return vec2(cos(normalized), sin(normalized));\\r\\n}\\r\\n\\r\\n// source: http://gamedev.stackexchange.com/a/59808\\r\\nvec3 hsv2rgb(vec3 c)\\r\\n{\\r\\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\\r\\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\\r\\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\\r\\n}\";","import {RenderController} from \"./render\";\r\nimport {GUI} from \"dat.gui\";\r\nimport {ColorMethod, Input, RenderContainer, UpdateSource} from \"./interfaces\";\r\n\r\nexport function initGUI(input: Input, renderController: RenderController, renderContainer: RenderContainer) {\r\n  let gui = new GUI();\r\n\r\n  const totalLines: UpdateSource = \"totalLines\";\r\n  const multiplier: UpdateSource = \"multiplier\";\r\n  const animate: UpdateSource = \"animate\";\r\n  const multiplierIncrement: UpdateSource = \"multiplierIncrement\";\r\n  const opacity: UpdateSource = \"opacity\";\r\n  const colorMethod: UpdateSource = \"colorMethod\";\r\n  const noiseStrength: UpdateSource = \"noiseStrength\";\r\n  const antialias: UpdateSource = \"antialias\";\r\n  const camPosX: UpdateSource = \"camPosX\";\r\n  const camPosY: UpdateSource = \"camPosY\";\r\n  const camZoom: UpdateSource = \"camZoom\";\r\n  const resetCamera: UpdateSource = \"resetCamera\";\r\n\r\n  const mathsFolder = gui.addFolder(\"Maths\");\r\n  mathsFolder.add(input, totalLines).min(0).step(1)\r\n    .onChange(() => renderController.requestRender(totalLines));\r\n\r\n  const multiplierController = mathsFolder.add(input, multiplier).step(1e-06);\r\n\r\n  function postRenderCallback() {\r\n    if (input.animate) {\r\n      multiplierController.setValue(input.multiplier + Math.pow(input.multiplierIncrement, 3));\r\n    }\r\n  }\r\n\r\n  multiplierController.onChange(\r\n    () => renderController.requestRender(multiplier, postRenderCallback)\r\n  );\r\n  mathsFolder.open();\r\n\r\n  const animationFolder = gui.addFolder(\"Animation\");\r\n  animationFolder.add(input, animate)\r\n    .onChange(() => renderController.requestRender(animate, postRenderCallback));\r\n  animationFolder.add(input, multiplierIncrement).min(-1).max(1).step(0.001)\r\n    .onChange(() => renderController.requestRender(multiplierIncrement));\r\n  animationFolder.open();\r\n\r\n  const colorFolder = gui.addFolder(\"Color\");\r\n  colorFolder.add(input, opacity, 0, 1).step(0.001)\r\n    .onChange(() => renderController.requestRender(opacity));\r\n  const colorMethods: Array<ColorMethod> = ['solid', 'faded', 'lengthOpacity', 'lengthHue', 'indexHue', 'fadedIndexHue'];\r\n  colorFolder.add(input, colorMethod, colorMethods)\r\n    .onChange(() => renderController.requestRender(colorMethod));\r\n  colorFolder.open();\r\n\r\n  const renderFolder = gui.addFolder(\"Render\");\r\n  renderFolder.add(input, noiseStrength, 0, 255).step(0.5)\r\n    .onChange(() => renderController.requestRender(noiseStrength));\r\n  renderFolder.add(input, antialias)\r\n    .onChange(() => renderController.requestRender(antialias));\r\n  renderFolder.open();\r\n\r\n  const cameraFolder = gui.addFolder(\"Camera\");\r\n  const camPosXController = cameraFolder.add(input, camPosX, -1, 1).step(1e-06);\r\n  camPosXController.onChange(() => renderController.requestRender(camPosX));\r\n  const camPosYController = cameraFolder.add(input, camPosY, -1, 1).step(1e-06);\r\n  camPosYController.onChange(() => renderController.requestRender(camPosY));\r\n  const camZoomController = cameraFolder.add(input, camZoom, 1).step(0.01);\r\n  camZoomController.onChange(() => renderController.requestRender(camZoom));\r\n  cameraFolder.add(input, resetCamera)\r\n    .onChange(() => {\r\n      camPosXController.setValue(0);\r\n      camPosYController.setValue(0);\r\n      camZoomController.setValue(1);\r\n    });\r\n  cameraFolder.open();\r\n\r\n\r\n  renderContainer.addEventListener(\"wheel\", (e: WheelEvent) => {\r\n    if (e.shiftKey) {\r\n      camZoomController.setValue(input.camZoom - e.deltaY / 1000);\r\n    }\r\n  });\r\n\r\n  renderContainer.addEventListener(\"mousemove\", (e: MouseEvent) => {\r\n    if (e.buttons === 1 && e.shiftKey) {\r\n      const circleDiameterPx = Math.min(renderContainer.clientHeight, renderContainer.clientWidth);\r\n\r\n      const realZoom = Math.pow(Math.E, input.camZoom - 1);\r\n\r\n      const movementFactor = realZoom * circleDiameterPx / 2;\r\n\r\n      camPosXController.setValue(input.camPosX - e.movementX / movementFactor);\r\n      camPosYController.setValue(input.camPosY + e.movementY / movementFactor);\r\n    }\r\n  })\r\n}\r\n","import THREE = require(\"three\");\r\n\r\nimport {ThreeEnv, Input, UpdateSource, RenderContainer} from \"./interfaces\";\r\nimport {\r\n  updateTotalLines,\r\n  updateCameraPosition,\r\n  updateOpacity,\r\n  updateCameraZoom,\r\n  updateMultiplier,\r\n  updateRendererSize,\r\n  updateColorMethod,\r\n  updateNoiseStrength,\r\n  updateRenderer\r\n} from \"./updateActions\";\r\n\r\n\r\nexport class RenderController {\r\n  private frameRequested = false;\r\n  private postRenderCallbacks: Set<() => void>;\r\n\r\n  private readonly updateSources: Set<UpdateSource>;\r\n  private readonly stats: Stats;\r\n  private readonly threeEnv: ThreeEnv;\r\n  private readonly input: Input;\r\n  private readonly renderContainer: RenderContainer;\r\n\r\n  constructor(stats: Stats, threeEnv: ThreeEnv, input: Input, renderContainer: RenderContainer) {\r\n    this.stats = stats;\r\n    this.threeEnv = threeEnv;\r\n    this.input = input;\r\n    this.renderContainer = renderContainer;\r\n    this.updateSources = new Set();\r\n    this.postRenderCallbacks = new Set();\r\n  }\r\n\r\n  public requestRender(source: UpdateSource, postRenderCallback?: () => void) {\r\n    this.updateSources.add(source);\r\n\r\n    if (!this.frameRequested) {\r\n      this.frameRequested = true;\r\n      requestAnimationFrame(() => this.render());\r\n    }\r\n\r\n    if (postRenderCallback) {\r\n      this.postRenderCallbacks.add(postRenderCallback);\r\n    }\r\n  }\r\n\r\n  private render() {\r\n    this.stats.begin();\r\n\r\n    this.frameRequested = false;\r\n\r\n    this.update();\r\n\r\n    this.threeEnv.renderer.render(this.threeEnv.scene, this.threeEnv.camera);\r\n\r\n    this.prepareNextRender();\r\n\r\n    this.stats.end();\r\n  }\r\n\r\n  private update() {\r\n    if (this.updateSources.has(\"init\")) {\r\n      updateRenderer(this.threeEnv, this.renderContainer, this.input.antialias);\r\n      updateRendererSize(this.threeEnv, window.innerHeight, window.innerWidth);\r\n      updateTotalLines(this.threeEnv, this.input.totalLines);\r\n      updateMultiplier(this.threeEnv.material, this.input.multiplier);\r\n      updateColorMethod(this.threeEnv.material, this.input.colorMethod);\r\n      updateOpacity(this.threeEnv.material, this.input.opacity);\r\n      updateCameraPosition(this.threeEnv.camera, this.input.camPosX, this.input.camPosY);\r\n      updateCameraZoom(this.threeEnv.camera, this.input.camZoom);\r\n    }\r\n\r\n    if (this.updateSources.has(\"antialias\")) {\r\n      updateRenderer(this.threeEnv, this.renderContainer, this.input.antialias);\r\n    }\r\n\r\n    if (this.updateSources.has(\"totalLines\")) {\r\n      updateTotalLines(this.threeEnv, this.input.totalLines);\r\n    }\r\n\r\n    if (this.updateSources.has(\"multiplier\")) {\r\n      updateMultiplier(this.threeEnv.material, this.input.multiplier);\r\n    }\r\n\r\n    if (this.updateSources.has(\"colorMethod\")) {\r\n      updateColorMethod(this.threeEnv.material, this.input.colorMethod);\r\n    }\r\n\r\n    if (this.updateSources.has(\"noiseStrength\")) {\r\n      updateNoiseStrength(this.threeEnv.material, this.input.noiseStrength);\r\n    }\r\n\r\n    if (this.updateSources.has(\"camPosX\") ||\r\n      this.updateSources.has(\"camPosY\")) {\r\n      updateCameraPosition(this.threeEnv.camera, this.input.camPosX, this.input.camPosY);\r\n    }\r\n\r\n    if (this.updateSources.has(\"camZoom\")) {\r\n      updateCameraZoom(this.threeEnv.camera, this.input.camZoom);\r\n    }\r\n\r\n    if (this.updateSources.has(\"opacity\")) {\r\n      updateOpacity(this.threeEnv.material, this.input.opacity);\r\n    }\r\n\r\n    if (this.updateSources.has(\"resize\")) {\r\n      updateRendererSize(this.threeEnv, window.innerHeight, window.innerWidth);\r\n    }\r\n  }\r\n\r\n  private prepareNextRender() {\r\n    this.updateSources.clear();\r\n\r\n    // clear postRenderCallbacks before executing the previous callbacks\r\n    // this allows renderCallbacks to requestRender with callbacks\r\n    const oldPostRenderCallbacks = this.postRenderCallbacks;\r\n\r\n    this.postRenderCallbacks = new Set();\r\n\r\n    oldPostRenderCallbacks.forEach(callback => callback());\r\n  }\r\n}\r\n","import {ColorMethod, RenderContainer, ThreeEnv} from \"./interfaces\";\r\nimport * as THREE from \"three\";\r\nimport {getGeometry, getLines} from \"./index\";\r\nimport assertNever from \"assert-never\";\r\n\r\nexport function updateColorMethod(material: THREE.ShaderMaterial, colorMethod: ColorMethod) {\r\n  switch (colorMethod) {\r\n    case 'solid':\r\n      material.uniforms.colorMethod.value = 0;\r\n      break;\r\n    case 'faded':\r\n      material.uniforms.colorMethod.value = 1;\r\n      break;\r\n    case 'lengthOpacity':\r\n      material.uniforms.colorMethod.value = 2;\r\n      break;\r\n    case 'lengthHue':\r\n      material.uniforms.colorMethod.value = 3;\r\n      break;\r\n    case 'indexHue':\r\n      material.uniforms.colorMethod.value = 4;\r\n      break;\r\n    case \"fadedIndexHue\":\r\n      material.uniforms.colorMethod.value = 5;\r\n      break;\r\n    default:\r\n      assertNever(colorMethod);\r\n  }\r\n\r\n  material.needsUpdate = true;\r\n}\r\n\r\nexport function updateMultiplier(material: THREE.ShaderMaterial, multiplier: number) {\r\n  material.uniforms.multiplier.value = multiplier;\r\n  material.needsUpdate = true;\r\n}\r\n\r\nexport function updateOpacity(material: THREE.ShaderMaterial, opacity: number) {\r\n  material.uniforms.opacity.value = opacity;\r\n  material.needsUpdate = true;\r\n}\r\n\r\nexport function updateNoiseStrength(material: THREE.ShaderMaterial, noiseStrength: number) {\r\n  material.uniforms.noiseStrength.value = noiseStrength;\r\n  material.needsUpdate = true;\r\n}\r\n\r\nexport function updateCameraPosition(camera: THREE.OrthographicCamera, camPosX: number, camPosY: number) {\r\n  camera.position.setX(camPosX);\r\n  camera.position.setY(camPosY);\r\n}\r\n\r\nexport function updateCameraZoom(camera: THREE.OrthographicCamera, zoom: number) {\r\n  camera.zoom = Math.pow(Math.E, zoom - 1);\r\n  camera.updateProjectionMatrix();\r\n}\r\n\r\nexport function updateRendererSize(threeEnv: ThreeEnv, height: number, width: number) {\r\n  const aspectRatio = width / height;\r\n\r\n  const camera = threeEnv.camera;\r\n\r\n  if (aspectRatio > 1) {\r\n    camera.left = -aspectRatio;\r\n    camera.right = aspectRatio;\r\n    camera.top = 1;\r\n    camera.bottom = -1;\r\n  } else {\r\n    camera.left = -1;\r\n    camera.right = 1;\r\n    camera.top = Math.pow(aspectRatio, -1);\r\n    camera.bottom = -Math.pow(aspectRatio, -1);\r\n  }\r\n\r\n  threeEnv.camera.updateProjectionMatrix();\r\n\r\n  threeEnv.renderer.setSize(width, height);\r\n}\r\n\r\nexport function updateTotalLines(threeEnv: ThreeEnv, totalLines: number) {\r\n  threeEnv.scene.remove(threeEnv.lines);\r\n\r\n  threeEnv.material.uniforms.total.value = totalLines;\r\n  threeEnv.material.needsUpdate = true;\r\n  threeEnv.lines = getLines(getGeometry(totalLines), threeEnv.material);\r\n\r\n  threeEnv.scene.add(threeEnv.lines);\r\n}\r\n\r\nexport function updateRenderer(threeEnv: ThreeEnv, renderContainer: RenderContainer, antialias: boolean) {\r\n  const newRenderer = new THREE.WebGLRenderer({antialias});\r\n  newRenderer.setPixelRatio(window.devicePixelRatio);\r\n  newRenderer.setSize(window.innerWidth, window.innerHeight);\r\n\r\n  if (renderContainer.firstChild) {\r\n    renderContainer.replaceChild(newRenderer.domElement, renderContainer.firstChild);\r\n  } else {\r\n    throw new Error(\"No Render Container\");\r\n  }\r\n\r\n  threeEnv.renderer = newRenderer;\r\n}"],"sourceRoot":""}