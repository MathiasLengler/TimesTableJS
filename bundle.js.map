{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/index.ts","webpack:///./res/style/index.css?0a7e","webpack:///./res/style/index.css","webpack:///./res/shaders/fragmentShader.glsl","webpack:///./res/shaders/vertexShader.glsl","webpack:///./src/gui.ts","webpack:///./src/render.ts","webpack:///./src/updateActions.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","getRandomNoiseTexture","Uint8Array","width","Math","random","dataTexture","THREE","DataTexture","RGBAFormat","UnsignedByteType","UVMapping","RepeatWrapping","LinearFilter","needsUpdate","getGeometry","totalLines","geometry","BufferGeometry","positions","Float32Array","addAttribute","BufferAttribute","getLines","material","lines","LineSegments","frustumCulled","onload","stats","Stats","showPanel","document","body","appendChild","dom","standard","input","multiplier","animate","multiplierIncrement","opacity","colorMethod","noiseStrength","antialias","camPosX","camPosY","camZoom","resetCamera","threeEnv","renderer","WebGLRenderer","setPixelRatio","devicePixelRatio","setSize","innerWidth","innerHeight","scene","Scene","camera","OrthographicCamera","position","setZ","lookAt","Vector3","ShaderMaterial","uniforms","total","noise","vertexShader","fragmentShader","blending","AdditiveBlending","depthTest","transparent","CustomBlending","blendEquation","AddEquation","blendSrc","SrcAlphaFactor","blendDst","OneFactor","add","getThreeEnv","renderContainer","createElement","id","domElement","getRenderContainer","renderController","RenderController","addEventListener","requestRender","Gui","initGUI","content","options","locals","gui","GUI","mathsFolder","addFolder","min","step","onChange","multiplierController","postRenderCallback","setValue","pow","open","animationFolder","max","colorFolder","renderFolder","cameraFolder","camPosXController","camPosYController","camZoomController","e","shiftKey","deltaY","buttons","circleDiameterPx","clientHeight","clientWidth","movementFactor","E","movementX","movementY","frameRequested","this","updateSources","Set","postRenderCallbacks","source","requestAnimationFrame","render","begin","update","prepareNextRender","end","has","updateRenderer","updateRendererSize","updateTotalLines","updateMultiplier","updateColorMethod","updateOpacity","updateCameraPosition","updateCameraZoom","updateNoiseStrength","clear","oldPostRenderCallbacks","forEach","callback","setX","setY","zoom","updateProjectionMatrix","height","aspectRatio","left","right","top","bottom","remove","newRenderer","firstChild","Error","replaceChild"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,1,2]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","// webpack\nimport \"../res/style/index.css\";\nimport fragmentShader from \"../res/shaders/fragmentShader.glsl\";\nimport vertexShader from \"../res/shaders/vertexShader.glsl\";\n// npm\nimport * as THREE from \"three\";\n// own\nimport * as Gui from \"./gui\";\nimport {RenderController} from \"./render\"\nimport {Input, RenderContainer, ThreeEnv} from \"./interfaces\";\nimport Stats = require(\"stats.js\");\n\n\nfunction getInitialInput(): Input {\n  const standard: Input = {\n    totalLines: 200,\n    multiplier: 2,\n    animate: false,\n    multiplierIncrement: 0.2,\n    opacity: 1,\n    colorMethod: 'lengthHue',\n    noiseStrength: 0.5,\n    antialias: false,\n    camPosX: 0,\n    camPosY: 0,\n    camZoom: 1,\n    resetCamera: () => {\n    }\n  };\n\n  const benchmark: Input = {\n    ...standard,\n    totalLines: 250000,\n    multiplier: 100000,\n    multiplierIncrement: 1,\n    opacity: 0.005,\n    colorMethod: 'faded',\n  };\n\n  const debug: Input = {\n    ...standard,\n    totalLines: 10,\n    multiplier: 2,\n    multiplierIncrement: 0.005,\n    colorMethod: 'faded',\n  };\n\n  const debugBlending: Input = {\n    ...standard,\n    totalLines: 10000,\n    opacity: 0.05,\n  };\n\n  const initialInputs = {\n    standard,\n    benchmark,\n    debug,\n    debugBlending\n  };\n\n  return initialInputs.standard;\n}\n\n\nfunction init() {\n  const stats = new Stats();\n  stats.showPanel(1);\n  document.body.appendChild(stats.dom);\n\n  const input = getInitialInput();\n\n  const threeEnv = getThreeEnv();\n\n  const renderContainer = getRenderContainer(threeEnv.renderer);\n\n  const renderController = new RenderController(stats, threeEnv, input, renderContainer);\n\n  window.addEventListener('resize', () => renderController.requestRender(\"resize\"));\n\n  Gui.initGUI(input, renderController, renderContainer);\n\n  renderController.requestRender(\"init\");\n}\n\nfunction getRenderContainer(renderer: THREE.WebGLRenderer): RenderContainer {\n  const renderContainer = document.createElement(\"div\");\n  renderContainer.id = \"render-container\";\n  document.body.appendChild(renderContainer);\n\n  renderContainer.appendChild(renderer.domElement);\n\n  return renderContainer;\n}\n\n// TODO: try other kinds of noises\nfunction getRandomNoiseTexture() {\n  const width = 1024;\n  const data = new Uint8Array(4 * width);\n  for (let i = 0; i < width * 4; i++) {\n    data[i] = Math.random() * 255 | 0;\n  }\n\n  const dataTexture = new THREE.DataTexture(data, width, 1, THREE.RGBAFormat, THREE.UnsignedByteType, THREE.UVMapping,\n    THREE.RepeatWrapping, THREE.RepeatWrapping, THREE.LinearFilter, THREE.LinearFilter);\n  dataTexture.needsUpdate = true;\n  return dataTexture;\n}\n\n/**\n * Static initialization of render environment\n */\nfunction getThreeEnv(): ThreeEnv {\n  const renderer = new THREE.WebGLRenderer({antialias: true});\n  renderer.setPixelRatio(window.devicePixelRatio);\n  renderer.setSize(window.innerWidth, window.innerHeight);\n\n  const scene = new THREE.Scene();\n\n  const camera = new THREE.OrthographicCamera(-1, 1, 1, -1);\n  camera.position.setZ(1);\n  camera.lookAt(new THREE.Vector3(0, 0, 0));\n\n  const material = new THREE.ShaderMaterial({\n    uniforms: {\n      multiplier: {value: 0},\n      total: {value: 0},\n      opacity: {value: 0},\n      colorMethod: {value: 0},\n      noise: {value: getRandomNoiseTexture()},\n      noiseStrength: {value: 0}\n    },\n    vertexShader: vertexShader,\n    fragmentShader: fragmentShader,\n    blending: THREE.AdditiveBlending,\n    depthTest: false,\n    transparent: true\n  });\n\n  material.blending = THREE.CustomBlending;\n  material.blendEquation = THREE.AddEquation;\n  material.blendSrc = THREE.SrcAlphaFactor;\n  material.blendDst = THREE.OneFactor;\n\n  const lines = getLines(getGeometry(0), material);\n\n  scene.add(lines);\n\n  return {\n    renderer,\n    scene,\n    camera,\n    material,\n    lines\n  };\n}\n\nexport function getGeometry(totalLines: number): THREE.BufferGeometry {\n  const geometry = new THREE.BufferGeometry();\n\n  // We use position attributes as parameters for the vertex shader\n  // because THREE.js seems to expect a position attribute in every BufferAttribute.\n  // Position attribute format:\n  //  x - index\n  //  y - isStart (of line) ? 0.0 : 1.0\n  //  z - unused\n  const vertices = totalLines * 2;\n  const positionsLength = vertices * 3;\n  const positions = new Float32Array(positionsLength);\n  for (let i = 0; i < totalLines; i++) {\n    positions[i * 6] = i; // x start\n    positions[i * 6 + 1] = 0.0; // y start\n    positions[i * 6 + 3] = i; // x end\n    positions[i * 6 + 4] = 1.0; // y end\n  }\n\n  geometry.addAttribute('position', new THREE.BufferAttribute(positions, 3));\n\n  return geometry;\n}\n\nexport function getLines(geometry: THREE.BufferGeometry, material: THREE.ShaderMaterial): THREE.LineSegments {\n  const lines = new THREE.LineSegments(geometry, material);\n  lines.frustumCulled = false;\n  return lines;\n}\n\nwindow.onload = init;","var content = require(\"!!../../node_modules/css-loader/dist/cjs.js!./index.css\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","exports = module.exports = require(\"../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"canvas {\\n    display: block;\\n}\\nbody {\\n    margin: 0;\\n}\\n\\n#render-container {\\n  user-select: none;\\n  cursor: default;\\n}\", \"\"]);\n","export default \"uniform float opacity;\\nuniform sampler2D noise;\\nuniform float noiseStrength;\\n\\nvarying vec3 vColor;\\nvarying float vLinePosition;\\n\\nvoid main() {\\n  gl_FragColor = vec4(vColor, opacity);\\n\\n  float noise = vec4(texture2D(noise, vec2(vLinePosition * 1024.0, 0.5))).r;\\n\\n  gl_FragColor.rgb += mix(-noiseStrength/255.0, noiseStrength/255.0, noise);\\n}\"","export default \"uniform float multiplier;\\nuniform float total;\\nuniform int colorMethod;\\n\\nvarying vec3 vColor;\\nvarying float vLinePosition;\\n\\n#define PI 3.1415926535897932384626433832795\\n\\nfloat distance(float index, float total, float multiplier);\\nvec2 getCircleCord(float number, float total);\\nvec3 hsv2rgb(vec3 c);\\n\\nvoid main() {\\n  vec2 circleCord;\\n\\n  float index = position.x;\\n  float isStartIndicator = position.y;\\n  bool isStart = isStartIndicator == 0.0;\\n  vLinePosition = isStartIndicator;\\n  if (isStart) {\\n    circleCord = getCircleCord(index, total);\\n  } else {\\n    circleCord = getCircleCord(index * multiplier, total);\\n  }\\n\\n  gl_Position = projectionMatrix *\\n                modelViewMatrix *\\n  vec4(circleCord, 0.0, 1.0);\\n\\n  // colorMethod switch\\n  if (colorMethod == 0) {\\n    // solid\\n    vColor = vec3(1.0);\\n  } else if (colorMethod == 1) {\\n    // faded\\n    if (isStart) {\\n      vColor = vec3(0.0);\\n    } else {\\n      vColor = vec3(1.0);\\n    }\\n  } else if (colorMethod == 2) {\\n    // lengthOpacity\\n    vColor = vec3(1.0 - distance(index, total, multiplier));\\n  } else if (colorMethod == 3) {\\n    // lengthHue\\n    vColor = vec3(hsv2rgb(vec3(distance(index, total, multiplier), 1.0, 1.0)));\\n  } else if (colorMethod == 4) {\\n    // indexHue\\n    vColor = vec3(hsv2rgb(vec3(index / total, 1.0, 1.0)));\\n  } else if (colorMethod == 5) {\\n    // fadedIndexHue\\n    if (isStart) {\\n      vColor = vec3(hsv2rgb(vec3(index / total, 1.0, 1.0)));\\n    } else {\\n      vColor = vec3(hsv2rgb(vec3(mod(index * multiplier, total) / total, 1.0, 1.0)));\\n    }\\n  } else {\\n    // fallback error red\\n    vColor = vec3(1.0, 0.0, 0.0);\\n  }\\n}\\n\\nfloat distance(float index, float total, float multiplier) {\\n  float theta = 2.0 * PI * index * (multiplier - 1.0) / total;\\n  return abs(sin(theta / 2.0));\\n}\\n\\nvec2 getCircleCord(float index, float total) {\\n  float normalized = 2.0 * PI * index / total;\\n    return vec2(cos(normalized), sin(normalized));\\n}\\n\\n// source: http://gamedev.stackexchange.com/a/59808\\nvec3 hsv2rgb(vec3 c)\\n{\\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\\n}\"","import {RenderController} from \"./render\";\nimport {GUI} from \"dat.gui\";\nimport {ColorMethod, Input, RenderContainer, UpdateSource} from \"./interfaces\";\n\nexport function initGUI(input: Input, renderController: RenderController, renderContainer: RenderContainer) {\n  let gui = new GUI();\n\n  const totalLines: UpdateSource = \"totalLines\";\n  const multiplier: UpdateSource = \"multiplier\";\n  const animate: UpdateSource = \"animate\";\n  const multiplierIncrement: UpdateSource = \"multiplierIncrement\";\n  const opacity: UpdateSource = \"opacity\";\n  const colorMethod: UpdateSource = \"colorMethod\";\n  const noiseStrength: UpdateSource = \"noiseStrength\";\n  const antialias: UpdateSource = \"antialias\";\n  const camPosX: UpdateSource = \"camPosX\";\n  const camPosY: UpdateSource = \"camPosY\";\n  const camZoom: UpdateSource = \"camZoom\";\n  const resetCamera: UpdateSource = \"resetCamera\";\n\n  const mathsFolder = gui.addFolder(\"Maths\");\n  mathsFolder.add(input, totalLines).min(0).step(1)\n    .onChange(() => renderController.requestRender(totalLines));\n\n  const multiplierController = mathsFolder.add(input, multiplier).step(1e-06);\n\n  function postRenderCallback() {\n    if (input.animate) {\n      multiplierController.setValue(input.multiplier + Math.pow(input.multiplierIncrement, 3));\n    }\n  }\n\n  multiplierController.onChange(\n    () => renderController.requestRender(multiplier, postRenderCallback)\n  );\n  mathsFolder.open();\n\n  const animationFolder = gui.addFolder(\"Animation\");\n  animationFolder.add(input, animate)\n    .onChange(() => renderController.requestRender(animate, postRenderCallback));\n  animationFolder.add(input, multiplierIncrement).min(-1).max(1).step(0.001)\n    .onChange(() => renderController.requestRender(multiplierIncrement));\n  animationFolder.open();\n\n  const colorFolder = gui.addFolder(\"Color\");\n  colorFolder.add(input, opacity, 0, 1).step(0.001)\n    .onChange(() => renderController.requestRender(opacity));\n  const colorMethods: Array<ColorMethod> = ['solid', 'faded', 'lengthOpacity', 'lengthHue', 'indexHue', 'fadedIndexHue'];\n  colorFolder.add(input, colorMethod, colorMethods)\n    .onChange(() => renderController.requestRender(colorMethod));\n  colorFolder.open();\n\n  const renderFolder = gui.addFolder(\"Render\");\n  renderFolder.add(input, noiseStrength, 0, 255).step(0.5)\n    .onChange(() => renderController.requestRender(noiseStrength));\n  renderFolder.add(input, antialias)\n    .onChange(() => renderController.requestRender(antialias));\n  renderFolder.open();\n\n  const cameraFolder = gui.addFolder(\"Camera\");\n  const camPosXController = cameraFolder.add(input, camPosX, -1, 1).step(1e-06);\n  camPosXController.onChange(() => renderController.requestRender(camPosX));\n  const camPosYController = cameraFolder.add(input, camPosY, -1, 1).step(1e-06);\n  camPosYController.onChange(() => renderController.requestRender(camPosY));\n  const camZoomController = cameraFolder.add(input, camZoom, 1).step(0.01);\n  camZoomController.onChange(() => renderController.requestRender(camZoom));\n  cameraFolder.add(input, resetCamera)\n    .onChange(() => {\n      camPosXController.setValue(0);\n      camPosYController.setValue(0);\n      camZoomController.setValue(1);\n    });\n  cameraFolder.open();\n\n\n  renderContainer.addEventListener(\"wheel\", (e: WheelEvent) => {\n    if (e.shiftKey) {\n      camZoomController.setValue(input.camZoom - e.deltaY / 1000);\n    }\n  });\n\n  renderContainer.addEventListener(\"mousemove\", (e: MouseEvent) => {\n    if (e.buttons === 1 && e.shiftKey) {\n      const circleDiameterPx = Math.min(renderContainer.clientHeight, renderContainer.clientWidth);\n\n      const realZoom = Math.pow(Math.E, input.camZoom - 1);\n\n      const movementFactor = realZoom * circleDiameterPx / 2;\n\n      camPosXController.setValue(input.camPosX - e.movementX / movementFactor);\n      camPosYController.setValue(input.camPosY + e.movementY / movementFactor);\n    }\n  })\n}\n","import THREE = require(\"three\");\n\nimport {ThreeEnv, Input, UpdateSource, RenderContainer} from \"./interfaces\";\nimport {\n  updateTotalLines,\n  updateCameraPosition,\n  updateOpacity,\n  updateCameraZoom,\n  updateMultiplier,\n  updateRendererSize,\n  updateColorMethod,\n  updateNoiseStrength,\n  updateRenderer\n} from \"./updateActions\";\n\n\nexport class RenderController {\n  private frameRequested = false;\n  private postRenderCallbacks: Set<() => void>;\n\n  private readonly updateSources: Set<UpdateSource>;\n  private readonly stats: Stats;\n  private readonly threeEnv: ThreeEnv;\n  private readonly input: Input;\n  private readonly renderContainer: RenderContainer;\n\n  constructor(stats: Stats, threeEnv: ThreeEnv, input: Input, renderContainer: RenderContainer) {\n    this.stats = stats;\n    this.threeEnv = threeEnv;\n    this.input = input;\n    this.renderContainer = renderContainer;\n    this.updateSources = new Set();\n    this.postRenderCallbacks = new Set();\n  }\n\n  public requestRender(source: UpdateSource, postRenderCallback?: () => void) {\n    this.updateSources.add(source);\n\n    if (!this.frameRequested) {\n      this.frameRequested = true;\n      requestAnimationFrame(() => this.render());\n    }\n\n    if (postRenderCallback) {\n      this.postRenderCallbacks.add(postRenderCallback);\n    }\n  }\n\n  private render() {\n    this.stats.begin();\n\n    this.frameRequested = false;\n\n    this.update();\n\n    this.threeEnv.renderer.render(this.threeEnv.scene, this.threeEnv.camera);\n\n    this.prepareNextRender();\n\n    this.stats.end();\n  }\n\n  private update() {\n    if (this.updateSources.has(\"init\")) {\n      updateRenderer(this.threeEnv, this.renderContainer, this.input.antialias);\n      updateRendererSize(this.threeEnv, window.innerHeight, window.innerWidth);\n      updateTotalLines(this.threeEnv, this.input.totalLines);\n      updateMultiplier(this.threeEnv.material, this.input.multiplier);\n      updateColorMethod(this.threeEnv.material, this.input.colorMethod);\n      updateOpacity(this.threeEnv.material, this.input.opacity);\n      updateCameraPosition(this.threeEnv.camera, this.input.camPosX, this.input.camPosY);\n      updateCameraZoom(this.threeEnv.camera, this.input.camZoom);\n    }\n\n    if (this.updateSources.has(\"antialias\")) {\n      updateRenderer(this.threeEnv, this.renderContainer, this.input.antialias);\n    }\n\n    if (this.updateSources.has(\"totalLines\")) {\n      updateTotalLines(this.threeEnv, this.input.totalLines);\n    }\n\n    if (this.updateSources.has(\"multiplier\")) {\n      updateMultiplier(this.threeEnv.material, this.input.multiplier);\n    }\n\n    if (this.updateSources.has(\"colorMethod\")) {\n      updateColorMethod(this.threeEnv.material, this.input.colorMethod);\n    }\n\n    if (this.updateSources.has(\"noiseStrength\")) {\n      updateNoiseStrength(this.threeEnv.material, this.input.noiseStrength);\n    }\n\n    if (this.updateSources.has(\"camPosX\") ||\n      this.updateSources.has(\"camPosY\")) {\n      updateCameraPosition(this.threeEnv.camera, this.input.camPosX, this.input.camPosY);\n    }\n\n    if (this.updateSources.has(\"camZoom\")) {\n      updateCameraZoom(this.threeEnv.camera, this.input.camZoom);\n    }\n\n    if (this.updateSources.has(\"opacity\")) {\n      updateOpacity(this.threeEnv.material, this.input.opacity);\n    }\n\n    if (this.updateSources.has(\"resize\")) {\n      updateRendererSize(this.threeEnv, window.innerHeight, window.innerWidth);\n    }\n  }\n\n  private prepareNextRender() {\n    this.updateSources.clear();\n\n    // clear postRenderCallbacks before executing the previous callbacks\n    // this allows renderCallbacks to requestRender with callbacks\n    const oldPostRenderCallbacks = this.postRenderCallbacks;\n\n    this.postRenderCallbacks = new Set();\n\n    oldPostRenderCallbacks.forEach(callback => callback());\n  }\n}\n","import {ColorMethod, RenderContainer, ThreeEnv} from \"./interfaces\";\nimport * as THREE from \"three\";\nimport {getGeometry, getLines} from \"./index\";\nimport assertNever from \"assert-never\";\n\nexport function updateColorMethod(material: THREE.ShaderMaterial, colorMethod: ColorMethod) {\n  switch (colorMethod) {\n    case 'solid':\n      material.uniforms.colorMethod.value = 0;\n      break;\n    case 'faded':\n      material.uniforms.colorMethod.value = 1;\n      break;\n    case 'lengthOpacity':\n      material.uniforms.colorMethod.value = 2;\n      break;\n    case 'lengthHue':\n      material.uniforms.colorMethod.value = 3;\n      break;\n    case 'indexHue':\n      material.uniforms.colorMethod.value = 4;\n      break;\n    case \"fadedIndexHue\":\n      material.uniforms.colorMethod.value = 5;\n      break;\n    default:\n      assertNever(colorMethod);\n  }\n\n  material.needsUpdate = true;\n}\n\nexport function updateMultiplier(material: THREE.ShaderMaterial, multiplier: number) {\n  material.uniforms.multiplier.value = multiplier;\n  material.needsUpdate = true;\n}\n\nexport function updateOpacity(material: THREE.ShaderMaterial, opacity: number) {\n  material.uniforms.opacity.value = opacity;\n  material.needsUpdate = true;\n}\n\nexport function updateNoiseStrength(material: THREE.ShaderMaterial, noiseStrength: number) {\n  material.uniforms.noiseStrength.value = noiseStrength;\n  material.needsUpdate = true;\n}\n\nexport function updateCameraPosition(camera: THREE.OrthographicCamera, camPosX: number, camPosY: number) {\n  camera.position.setX(camPosX);\n  camera.position.setY(camPosY);\n}\n\nexport function updateCameraZoom(camera: THREE.OrthographicCamera, zoom: number) {\n  camera.zoom = Math.pow(Math.E, zoom - 1);\n  camera.updateProjectionMatrix();\n}\n\nexport function updateRendererSize(threeEnv: ThreeEnv, height: number, width: number) {\n  const aspectRatio = width / height;\n\n  const camera = threeEnv.camera;\n\n  if (aspectRatio > 1) {\n    camera.left = -aspectRatio;\n    camera.right = aspectRatio;\n    camera.top = 1;\n    camera.bottom = -1;\n  } else {\n    camera.left = -1;\n    camera.right = 1;\n    camera.top = Math.pow(aspectRatio, -1);\n    camera.bottom = -Math.pow(aspectRatio, -1);\n  }\n\n  threeEnv.camera.updateProjectionMatrix();\n\n  threeEnv.renderer.setSize(width, height);\n}\n\nexport function updateTotalLines(threeEnv: ThreeEnv, totalLines: number) {\n  threeEnv.scene.remove(threeEnv.lines);\n\n  threeEnv.material.uniforms.total.value = totalLines;\n  threeEnv.material.needsUpdate = true;\n  threeEnv.lines = getLines(getGeometry(totalLines), threeEnv.material);\n\n  threeEnv.scene.add(threeEnv.lines);\n}\n\nexport function updateRenderer(threeEnv: ThreeEnv, renderContainer: RenderContainer, antialias: boolean) {\n  const newRenderer = new THREE.WebGLRenderer({antialias});\n  newRenderer.setPixelRatio(window.devicePixelRatio);\n  newRenderer.setSize(window.innerWidth, window.innerHeight);\n\n  if (renderContainer.firstChild) {\n    renderContainer.replaceChild(newRenderer.domElement, renderContainer.firstChild);\n  } else {\n    throw new Error(\"No Render Container\");\n  }\n\n  threeEnv.renderer = newRenderer;\n}"],"sourceRoot":""}